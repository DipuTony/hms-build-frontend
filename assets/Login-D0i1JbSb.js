var e=Object.defineProperty,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,o=(e,o)=>{for(var i in o||(o={}))r.call(o,i)&&a(e,i,o[i]);if(s)for(var i of s(o))t.call(o,i)&&a(e,i,o[i]);return e};import{j as i,n}from"./ui-BM_Qdf4X.js";import{r as l}from"./vendor-IVAbD_Ia.js";import{u as d}from"./formik.esm-ChFveakS.js";import{c as m,a as c}from"./index.esm-B5BHOsnc.js";import{a as u}from"./axios-CgL8z04V.js";import{A as g}from"./apiEndpoints-DqDHaI1a.js";import{$ as p}from"./module-Bt5WAu5e.js";import{A as x}from"./index-B6zYgTVN.js";import{a as f}from"./router-DmxMsUT6.js";const h=e=>{const[s,r]=l.useState(!1),[t,a]=l.useState({}),h=f(),{isLoggedIn:b,userIs:y}=x();l.useEffect(()=>{!0===b&&"user"===y?h("/user"):!0===b&&"admin"===y&&h("/admin")},[b,y,h]);const j=m({email:c().required("Require"),password:c().required("Require")}),w=d({initialValues:{email:"",password:""},enableReinitialize:!0,onSubmit:(e,s)=>{console.log("Value.....",e),v(e)},validationSchema:j}),v=e=>{a(),r(!0),u.post(g.api_login,{email:null==e?void 0:e.email,password:null==e?void 0:e.password}).then(e=>{if(e.data.status){r(!1),a({status:!0,message:e.data.message}),console.log("Login Successful",e),localStorage.setItem("userData",JSON.stringify(e.data.userData));const{isLoggedIn:s,userIs:t}=x();h(!0===s&&"user"===t?"/user":"/admin")}else r(!1),a({status:!1,message:e.data.message||"Something went wrong!"}),n.error(e.data.message||"Something went wrong!"),console.log("Invalid Credentials",e)}).catch(e=>{r(!1),console.error("Error while login",e),e.response?(a({status:!1,message:e.response.data.message||"Something went wrong!"}),n.error(e.response.data.message||"Something went wrong!")):(a({status:!1,message:"Network error. Please check your connection."}),n.error("Network error. Please check your connection."))})};return i.jsx(i.Fragment,{children:i.jsx("section",{className:"h-screen",children:i.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:i.jsx("div",{className:"w-full bg-white rounded-lg shadow  md:mt-0 sm:max-w-md xl:p-0",children:i.jsxs("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[i.jsx("h1",{className:"text-xl text-center font-bold leading-tight tracking-tight text-gray-900 md:text-2xl ",children:"Login"}),i.jsx("form",{onSubmit:w.handleSubmit,onChange:e=>{e.target.name,e.target.value},className:"space-y-4 md:space-y-6",children:i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"",className:"text-base font-medium text-gray-900",children:"Email address"}),i.jsxs("div",{className:"mt-2.5",children:[i.jsx("input",o({placeholder:"Email",className:"flex h-10 w-full rounded-md border border-gray-300 bg-transparent py-2 px-3 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",type:"email"},w.getFieldProps("email"))),i.jsx("p",{className:"text-red-500 text-xs",children:w.touched.email&&w.errors.email?w.errors.email:null})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("label",{htmlFor:"",className:"text-base font-medium text-gray-900",children:"Password"}),i.jsx("span",{onClick:()=>h("/forgot-password"),className:"text-sm cursor-pointer font-medium text-indigo-600 hover:underline hover:text-indigo-700 focus:text-indigo-700",children:"Forgot password?"})]}),i.jsxs("div",{className:"mt-2.5",children:[i.jsx("input",o({placeholder:"Password",className:"flex h-10 w-full rounded-md border border-gray-300 bg-transparent py-2 px-3 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",type:"password"},w.getFieldProps("password"))),i.jsx("p",{className:"text-red-500 text-xs",children:w.touched.password&&w.errors.password?w.errors.password:null})]})]}),(null==t?void 0:t.message)&&i.jsx("div",{className:`py-1 text-center text-sm font-medium border rounded ${(null==t?void 0:t.status)?"text-green-500 bg-green-100 border-green-400":"text-red-500 bg-red-100 border-red-400"} `,children:t&&(null==t?void 0:t.message)}),i.jsx("div",{children:i.jsxs("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center disabled:bg-gray-400 text-white bg-gray-600 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:[!s&&"Sign In",i.jsx(p,{strokeColor:"white",strokeWidth:"6",animationDuration:"0.75",width:"20",visible:s})]})})]})})]})})})})})};export{h as default};
