var e=Object.defineProperty,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(r,t,s)=>t in r?e(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,l=(e,l)=>{for(var o in l||(l={}))t.call(l,o)&&a(e,o,l[o]);if(r)for(var o of r(l))s.call(l,o)&&a(e,o,l[o]);return e};import{j as o,n as d}from"./ui-BM_Qdf4X.js";import{r as i}from"./vendor-IVAbD_Ia.js";import{L as c,D as n,a as m,M as u,f as x}from"./DateFormatFunctions-CtpqsCOY.js";import{a as p}from"./axiosConfig-Dc1nKXq_.js";import{N as h}from"./NavBarIndex-By_Srw2q.js";import{A as g}from"./apiEndpoints-DqDHaI1a.js";import{C as j}from"./CommonModal-CR-TkZ4S.js";import{u as f}from"./formik.esm-ChFveakS.js";import{c as y,a as b}from"./index.esm-B5BHOsnc.js";import{u as v}from"./useAddData-BaBQQoBe.js";import{c as w}from"./index-B6zYgTVN.js";import{A as N}from"./ApiList-B1H3egYh.js";import{a as F}from"./router-DmxMsUT6.js";import"./index-BUoLAcM7.js";import"./index-BiFM5FDq.js";import"./trash-2-BC9Ip2N6.js";import"./axios-CgL8z04V.js";
/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=w("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),A=({closeModal:e})=>{const r=F(),{api_react_interview_pro_add_articles:t}=N(),{loading:s,error:a,responseData:d,addData:c}=v(t),n=y({title:b().required("Title is required"),category:b().required("Category is required"),desc:b().nullable(),img:b().url("Must be a valid URL").required("Image URL is required"),url:b().url("Must be a valid URL").required("Blog URL is required")}),m=f({initialValues:{title:"",category:"",desc:"",img:"",url:""},validationSchema:n,onSubmit:e=>{console.log("Form Values:",e),c(e)}});return i.useEffect(()=>{d&&(console.log("article added successfully:",d),e())},[d,r]),o.jsx(o.Fragment,{children:o.jsx("div",{className:"flex justify-center items-center bg-gray-100",children:o.jsx("div",{className:" bg-white p-8 rounded-lg shadow-lg overflow-y-auto w-96",children:o.jsxs("form",{onSubmit:m.handleSubmit,children:[o.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),o.jsx("input",l({type:"text",className:"w-full h-10 border border-gray-300 rounded-md px-3"},m.getFieldProps("title"))),m.touched.title&&m.errors.title&&o.jsx("p",{className:"text-red-500 text-xs",children:m.errors.title})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),o.jsx("input",l({type:"text",className:"w-full h-10 border border-gray-300 rounded-md px-3"},m.getFieldProps("category"))),m.touched.category&&m.errors.category&&o.jsx("p",{className:"text-red-500 text-xs",children:m.errors.category})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",l({className:"w-full h-24 border border-gray-300 rounded-md px-3 py-2"},m.getFieldProps("desc"))),m.touched.desc&&m.errors.desc&&o.jsx("p",{className:"text-red-500 text-xs",children:m.errors.desc})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),o.jsx("input",l({type:"url",className:"w-full h-10 border border-gray-300 rounded-md px-3"},m.getFieldProps("img"))),m.touched.img&&m.errors.img&&o.jsx("p",{className:"text-red-500 text-xs",children:m.errors.img})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Blog URL"}),o.jsx("input",l({type:"url",className:"w-full h-10 border border-gray-300 rounded-md px-3"},m.getFieldProps("url"))),m.touched.url&&m.errors.url&&o.jsx("p",{className:"text-red-500 text-xs",children:m.errors.url})]})]}),o.jsx("div",{className:"flex justify-end mt-4",children:o.jsx("button",{disabled:s,type:"submit",className:"bg-blue-600 disabled:opacity-60 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add Article"})})]})})})})};function M(){return o.jsx("div",{children:"EditNewsArticle"})}const k=()=>{const[e,r]=i.useState(!1),[t,s]=i.useState(!1),[a,l]=i.useState(!1),[f,y]=i.useState([]),[b,v]=i.useState(null),w=()=>{s(!1)};F();const N=()=>{return e=void 0,r=null,t=function*(){var e,r,t,s;try{l(!0),v(null);const t=yield p.post(g.api_react_interview_pro_view_articles);(null==(e=null==t?void 0:t.data)?void 0:e.status)?(y(t.data.data),console.log("Data fetched",t.data.data)):(y([]),v((null==(r=null==t?void 0:t.data)?void 0:r.message)||"Failed to fetch data"),console.log("Failed to fetch data",t))}catch(a){y([]);const e=(null==(s=null==(t=null==a?void 0:a.response)?void 0:t.data)?void 0:s.message)||"Failed to fetch data";v(e),d.error("Error: "+e),console.error("Failed to fetch data",a)}finally{l(!1)}},new Promise((s,a)=>{var l=e=>{try{d(t.next(e))}catch(r){a(r)}},o=e=>{try{d(t.throw(e))}catch(r){a(r)}},d=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,o);d((t=t.apply(e,r)).next())});var e,r,t};i.useEffect(()=>{N()},[]);const k=[{Header:"articleId",accessor:"articleId",Cell:({cell:e})=>e.row.values.articleId},{Header:"title",accessor:"title",Cell:({cell:e})=>e.row.values.title},{Header:"category",accessor:"category",Cell:({cell:e})=>e.row.values.category},{Header:"createdAt",accessor:"createdAt",Cell:({cell:e})=>x(e.row.values.created_at)},{Header:"Last Modified",accessor:"updatedAt",Cell:({cell:e})=>x(e.row.values.updated_at)},{Header:"Action",accessor:"hospitalId",Cell:({cell:e})=>o.jsx("div",{className:"flex gap-x-2",children:o.jsx("button",{onClick:()=>r(!0),className:"flex justify-center items-center space-x-1 border px-4 py-2 rounded shadow-sm bg-gray-700 hover:bg-gray-600 text-white font-semibold",children:o.jsx("span",{children:"View"})})})}];return o.jsxs(o.Fragment,{children:[o.jsx(j,{showModal:t,closeModal:w,children:o.jsx(A,{closeModal:w})}),o.jsx(j,{showModal:e,closeModal:()=>r(!1),children:o.jsx(M,{closeModal:()=>r(!1)})}),o.jsx(h,{title:"Hospital List"}),o.jsx("div",{className:"w-full h-fit p-5 bg-white border rounded-md mb-5 overflow-y-auto",children:o.jsx("div",{className:"",children:a?o.jsx(c,{}):f?o.jsx(n,{columns:k,data:f,addBtn:o.jsxs("button",{onClick:()=>{s(!0)},className:"bg-gray-700 rounded py-1 text-sm px-3 text-white hover:shadow-2xl hover:bg-gray-800 text-center relative flex gap-2 whitespace-nowrap",children:["Add New Article",o.jsx(C,{className:"mt-0.5",size:15})," "]})}):o.jsx(m,{message:"No Data Found !!"})})}),o.jsx(u,{id:"my-tooltip"})]})};export{k as default};
