var e=Object.defineProperty,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,a=(s,r,t)=>r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t,o=(e,o)=>{for(var n in o||(o={}))r.call(o,n)&&a(e,n,o[n]);if(s)for(var n of s(o))t.call(o,n)&&a(e,n,o[n]);return e};import{j as n}from"./ui-BM_Qdf4X.js";import{r as l}from"./vendor-IVAbD_Ia.js";import{u as i}from"./formik.esm-ChFveakS.js";import{c as d,a as c}from"./index.esm-B5BHOsnc.js";import{a as m}from"./axios-CgL8z04V.js";import{A as u}from"./ApiList-B1H3egYh.js";import{$ as x}from"./module-Bt5WAu5e.js";import{a as g,d as p}from"./router-DmxMsUT6.js";import"./index-B6zYgTVN.js";const h=e=>{const[s,r]=l.useState(!1),[t,a]=l.useState({}),[h,f]=l.useState(!1),[w,y]=l.useState(!1),b=g(),{api_validateToken:j,api_resetPassword:v}=u(),{token:P}=p();l.useEffect(()=>{if(!P)return b("/login");N()},[P]);const N=()=>{y(!0),m.post(j,{resetKey:P}).then(e=>{e.data.status?(f(!0),y(!1),console.log("Token Validated Successfully",e)):(y(!1),console.log("Invalid Token",e),f(!1))}).catch(e=>{y(!1),console.log("Error while validate token",e)})},k=d({newPassword:c().required("Required").min(6),confirmPassword:c().required("Required").test("passwords-match","Passwords must match",function(e){return e===this.parent.newPassword})}),S=i({initialValues:{newPassword:"",confirmPassword:""},enableReinitialize:!0,onSubmit:(e,s)=>{console.log("Value.....",e),C(e)},validationSchema:k}),C=e=>{a(),r(!0),m.post(v,{resetKey:P,password:null==e?void 0:e.confirmPassword}).then(e=>{e.data.status?(console.log("Password Change Successful",e),r(!1),a({status:!0,message:e.data.message})):(console.log("Invalid Credentials",e),a({status:!1,message:e.data.message}),r(!1),f(!1))}).catch(e=>{console.log("Error while login",e),r(!1),a({status:!1,message:e.response.data.message})})};return n.jsx(n.Fragment,{children:n.jsx("section",{className:"h-screen",children:n.jsx("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0",children:n.jsx("div",{className:"w-full bg-white rounded-lg shadow  md:mt-0 sm:max-w-md xl:p-0",children:n.jsx("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:w?"Loading..":h?n.jsxs(n.Fragment,{children:[n.jsx("h1",{className:"text-xl text-center font-bold leading-tight tracking-tight text-gray-900 md:text-2xl ",children:"Reset Password"}),n.jsx("form",{onSubmit:S.handleSubmit,onChange:e=>{e.target.name,e.target.value},className:"space-y-4 md:space-y-6",children:n.jsxs("div",{className:"space-y-5",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"",className:"text-base font-medium text-gray-900",children:"New Password"}),n.jsxs("div",{className:"mt-2.5",children:[n.jsx("input",o({placeholder:"********",className:"flex h-10 w-full rounded-md border border-gray-300 bg-transparent py-2 px-3 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",type:"password"},S.getFieldProps("newPassword"))),n.jsx("p",{className:"text-red-500 text-xs",children:S.touched.newPassword&&S.errors.newPassword?S.errors.newPassword:null})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"",className:"text-base font-medium text-gray-900",children:"Confirm Password"}),n.jsxs("div",{className:"mt-2.5",children:[n.jsx("input",o({placeholder:"********",className:"flex h-10 w-full rounded-md border border-gray-300 bg-transparent py-2 px-3 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-1 focus:ring-gray-400 focus:ring-offset-1 disabled:cursor-not-allowed disabled:opacity-50",type:"password"},S.getFieldProps("confirmPassword"))),n.jsx("p",{className:"text-red-500 text-xs",children:S.touched.confirmPassword&&S.errors.confirmPassword?S.errors.confirmPassword:null})]})]}),(null==t?void 0:t.message)&&n.jsx("div",{className:`py-1 text-center text-sm font-medium border rounded ${(null==t?void 0:t.status)?"text-green-500 bg-green-50 border-green-400":"text-red-500 bg-red-100 border-red-400"} `,children:t&&(null==t?void 0:t.message)}),n.jsx("div",{children:n.jsxs("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center disabled:bg-gray-400 text-white bg-gray-600 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",children:[!s&&"Reset Password",n.jsx(x,{strokeColor:"white",strokeWidth:"6",animationDuration:"0.75",width:"20",visible:s})]})})]})})]}):n.jsxs("div",{className:"text-center ",children:[n.jsx("p",{className:"font-semibold text-lg",children:"Invalid Token or Expired!"}),n.jsx("p",{children:"Please try again to reset your password."}),n.jsxs("div",{className:"flex justify-center gap-x-5 my-4",children:[n.jsx("p",{onClick:()=>b("/register"),className:"cursor-pointer text-sm font-semibold text-gray-700 border border-gray-800 px-2 py-1 rounded hover:bg-gray-600 hover:text-white",children:"Register"}),n.jsx("p",{onClick:()=>b("/login"),className:"cursor-pointer text-sm font-semibold text-gray-700 border border-gray-800 px-2 py-1 rounded hover:bg-gray-600 hover:text-white",children:"Login"})]})]})})})})})})};export{h as default};
