import{j as e,n as t}from"./ui-BM_Qdf4X.js";import{r as o,d as n,e as r}from"./vendor-IVAbD_Ia.js";import{A as a,L as i,D as l,a as s,M as c,f as d}from"./DateFormatFunctions-B1k3nmYW.js";import{a as u,L as f}from"./router-DmxMsUT6.js";import{a as p}from"./axiosConfig-DyWwVpEC.js";import{N as v}from"./NavBarIndex-D6cju6bs.js";import{A as m}from"./apiEndpoints-CtCAa7F0.js";import{U as h}from"./index-BeQWOJxL.js";import"./index-BUoLAcM7.js";import"./index-CTctjeav.js";import"./trash-2-BKjogj3R.js";import"./axios-CgL8z04V.js";function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},y.apply(this,arguments)}var g="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,w={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},b=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],x=function(e,t,o,n,r){var a=r.offsetX,i=r.offsetY,l=n?8:0,s=o.split(" "),c=e.top+e.height/2,d=e.left+e.width/2,u=t.height,f=t.width,p=c-u/2,v=d-f/2,m="",h="0%",y="0%";switch(s[0]){case"top":p-=u/2+e.height/2+l,m="rotate(180deg)  translateX(50%)",h="100%",y="50%";break;case"bottom":p+=u/2+e.height/2+l,m="rotate(0deg) translateY(-100%) translateX(-50%)",y="50%";break;case"left":v-=f/2+e.width/2+l,m=" rotate(90deg)  translateY(50%) translateX(-25%)",y="100%",h="50%";break;case"right":v+=f/2+e.width/2+l,m="rotate(-90deg)  translateY(-150%) translateX(25%)",h="50%"}switch(s[1]){case"top":p=e.top,h=e.height/2+"px";break;case"bottom":p=e.top-u+e.height,h=u-e.height/2+"px";break;case"left":v=e.left,y=e.width/2+"px";break;case"right":v=e.left-f+e.width,y=f-e.width/2+"px"}return{top:p="top"===s[0]?p-i:p+i,left:v="left"===s[0]?v-a:v+a,transform:m,arrowLeft:y,arrowTop:h}},E=function(e,t,o,n,r,a){var i=r.offsetX,l=r.offsetY,s={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,d=function(e){var t={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if("string"==typeof e){var o=document.querySelector(e);null!==o&&(t=o.getBoundingClientRect())}return t}(a),u=Array.isArray(o)?o:[o];for((a||Array.isArray(o))&&(u=[].concat(u,b));c<u.length;){var f={top:(s=x(e,t,u[c],n,{offsetX:i,offsetY:l})).top,left:s.left,width:t.width,height:t.height};if(!(f.top<=d.top||f.left<=d.left||f.top+f.height>=d.top+d.height||f.left+f.width>=d.left+d.width))break;c++}return s},j=0,k=o.forwardRef(function(e,t){var a=e.trigger,i=void 0===a?null:a,l=e.onOpen,s=void 0===l?function(){}:l,c=e.onClose,d=void 0===c?function(){}:c,u=e.defaultOpen,f=void 0!==u&&u,p=e.open,v=void 0===p?void 0:p,m=e.disabled,h=void 0!==m&&m,b=e.nested,x=void 0!==b&&b,k=e.closeOnDocumentClick,C=void 0===k||k,N=e.repositionOnResize,A=void 0===N||N,S=e.closeOnEscape,L=void 0===S||S,D=e.on,H=void 0===D?["click"]:D,T=e.contentStyle,B=void 0===T?{}:T,I=e.arrowStyle,F=void 0===I?{}:I,R=e.overlayStyle,O=void 0===R?{}:R,M=e.className,P=void 0===M?"":M,X=e.position,z=void 0===X?"bottom center":X,Y=e.modal,_=void 0!==Y&&Y,q=e.lockScroll,U=void 0!==q&&q,V=e.arrow,K=void 0===V||V,W=e.offsetX,$=void 0===W?0:W,G=e.offsetY,J=void 0===G?0:G,Q=e.mouseEnterDelay,Z=void 0===Q?100:Q,ee=e.mouseLeaveDelay,te=void 0===ee?100:ee,oe=e.keepTooltipInside,ne=void 0!==oe&&oe,re=e.children,ae=o.useState(v||f),ie=ae[0],le=ae[1],se=o.useRef(null),ce=o.useRef(null),de=o.useRef(null),ue=o.useRef(null),fe=o.useRef("popup-"+ ++j),pe=!!_||!i,ve=o.useRef(0);g(function(){return ie?(ue.current=document.activeElement,Ne(),je(),xe()):Ee(),function(){clearTimeout(ve.current)}},[ie]),o.useEffect(function(){"boolean"==typeof v&&(v?me():he())},[v,h]);var me=function(e){ie||h||(le(!0),setTimeout(function(){return s(e)},0))},he=function(e){var t;ie&&!h&&(le(!1),pe&&(null===(t=ue.current)||void 0===t||t.focus()),setTimeout(function(){return d(e)},0))},ye=function(e){null==e||e.stopPropagation(),ie?he(e):me(e)},ge=function(e){clearTimeout(ve.current),ve.current=setTimeout(function(){return me(e)},Z)},we=function(e){null==e||e.preventDefault(),ye()},be=function(e){clearTimeout(ve.current),ve.current=setTimeout(function(){return he(e)},te)},xe=function(){pe&&U&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},Ee=function(){pe&&U&&(document.getElementsByTagName("body")[0].style.overflow="auto")},je=function(){var e,t=null==ce||null===(e=ce.current)||void 0===e?void 0:e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),o=Array.prototype.slice.call(t)[0];null==o||o.focus()};o.useImperativeHandle(t,function(){return{open:function(){me()},close:function(){he()},toggle:function(){ye()}}});var ke,Ce,Ne=function(){if(!pe&&ie&&(null==se?void 0:se.current)&&(null==se?void 0:se.current)&&(null==ce?void 0:ce.current)){var e,t,o=se.current.getBoundingClientRect(),n=ce.current.getBoundingClientRect(),r=E(o,n,z,K,{offsetX:$,offsetY:J},ne);if(ce.current.style.top=r.top+window.scrollY+"px",ce.current.style.left=r.left+window.scrollX+"px",K&&de.current)de.current.style.transform=r.transform,de.current.style.setProperty("-ms-transform",r.transform),de.current.style.setProperty("-webkit-transform",r.transform),de.current.style.top=(null===(e=F.top)||void 0===e?void 0:e.toString())||r.arrowTop,de.current.style.left=(null===(t=F.left)||void 0===t?void 0:t.toString())||r.arrowLeft}};ke=he,void 0===(Ce=L)&&(Ce=!0),o.useEffect(function(){if(Ce){var e=function(e){"Escape"===e.key&&ke(e)};return document.addEventListener("keyup",e),function(){Ce&&document.removeEventListener("keyup",e)}}},[ke,Ce]),function(e,t){void 0===t&&(t=!0),o.useEffect(function(){if(t){var o=function(t){if(9===t.keyCode){var o,n=null==e||null===(o=e.current)||void 0===o?void 0:o.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),r=Array.prototype.slice.call(n);if(1===r.length)return void t.preventDefault();var a=r[0],i=r[r.length-1];t.shiftKey&&document.activeElement===a?(t.preventDefault(),i.focus()):document.activeElement===i&&(t.preventDefault(),a.focus())}};return document.addEventListener("keydown",o),function(){t&&document.removeEventListener("keydown",o)}}},[e,t])}(ce,ie&&pe),function(e,t){void 0===t&&(t=!0),o.useEffect(function(){if(t){var o=function(){e()};return window.addEventListener("resize",o),function(){t&&window.removeEventListener("resize",o)}}},[e,t])}(Ne,A),function(e,t,n){void 0===n&&(n=!0),o.useEffect(function(){if(n){var o=function(o){var n=Array.isArray(e)?e:[e],r=!1;n.forEach(function(e){e.current&&!e.current.contains(o.target)||(r=!0)}),o.stopPropagation(),r||t(o)};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),function(){n&&(document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o))}}},[e,t,n])}(i?[ce,se]:[ce],he,C&&!x);var Ae,Se=function(){return n.createElement("div",Object.assign({},(e=pe?w.popupContent.modal:w.popupContent.tooltip,t={className:"popup-content "+(""!==P?P.split(" ").map(function(e){return e+"-content"}).join(" "):""),style:y({},e,B,{pointerEvents:"auto"}),ref:ce,onClick:function(e){e.stopPropagation()}},!_&&H.indexOf("hover")>=0&&(t.onMouseEnter=ge,t.onMouseLeave=be),t),{key:"C",role:pe?"dialog":"tooltip",id:fe.current}),K&&!pe&&n.createElement("div",{ref:de,style:w.popupArrow},n.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(""!==P?P.split(" ").map(function(e){return e+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:y({position:"absolute"},F)},n.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),re&&"function"==typeof re?re(he,ie):re);var e,t},Le=!(H.indexOf("hover")>=0),De=pe?w.overlay.modal:w.overlay.tooltip,He=[Le&&n.createElement("div",{key:"O","data-testid":"overlay","data-popup":pe?"modal":"tooltip",className:"popup-overlay "+(""!==P?P.split(" ").map(function(e){return e+"-overlay"}).join(" "):""),style:y({},De,O,{pointerEvents:C&&x||pe?"auto":"none"}),onClick:C&&x?he:void 0,tabIndex:-1},pe&&Se()),!pe&&Se()];return n.createElement(n.Fragment,null,function(){for(var e={key:"T",ref:se,"aria-describedby":fe.current},t=Array.isArray(H)?H:[H],o=0,r=t.length;o<r;o++)switch(t[o]){case"click":e.onClick=ye;break;case"right-click":e.onContextMenu=we;break;case"hover":e.onMouseEnter=ge,e.onMouseLeave=be;break;case"focus":e.onFocus=ge,e.onBlur=be}if("function"==typeof i){var a=i(ie);return!!i&&n.cloneElement(a,e)}return!!i&&n.cloneElement(i,e)}(),ie&&r.createPortal(He,(null===(Ae=document.getElementById("popup-root"))&&((Ae=document.createElement("div")).setAttribute("id","popup-root"),document.body.appendChild(Ae)),Ae)))});const C=()=>{const[n,r]=o.useState(!1),[y,g]=o.useState(),[w,b]=o.useState(),[x,E]=o.useState(!1),[j,C]=o.useState(!1),[N,A]=o.useState([]),[S,L]=o.useState(null),D=u(),H=()=>{return e=void 0,o=null,n=function*(){var e,o,n,r;try{C(!0),L(null);const t=yield p.post(m.api_view_hospitals);(null==(e=null==t?void 0:t.data)?void 0:e.status)?(A(t.data.data),console.log("Data fetched",t.data.data)):(A([]),L((null==(o=null==t?void 0:t.data)?void 0:o.message)||"Failed to fetch data"),console.log("Failed to fetch data",t))}catch(a){A([]);const e=(null==(r=null==(n=null==a?void 0:a.response)?void 0:n.data)?void 0:r.message)||"Failed to fetch data";L(e),t.error("Error: "+e),console.error("Failed to fetch data",a)}finally{C(!1)}},new Promise((t,r)=>{var a=e=>{try{l(n.next(e))}catch(t){r(t)}},i=e=>{try{l(n.throw(e))}catch(t){r(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,i);l((n=n.apply(e,o)).next())});var e,o,n};o.useEffect(()=>{H()},[]);const T=[{Header:"Hospital Name",accessor:"name",Cell:({cell:e})=>e.row.values.name},{Header:"City",accessor:"city",Cell:({cell:e})=>e.row.values.city},{Header:"Phone Number",accessor:"phoneNumber",Cell:({cell:e})=>e.row.values.phoneNumber},{Header:"Status",accessor:"category",Cell:({cell:t})=>e.jsxs("div",{className:"uppercase text-xs font-bold",children:["subscribed"==t.row.values.category&&e.jsx("p",{className:"bg-green-200 text-green-700 border w-fit px-2",children:"SUBSCRIBED"}),"unsubscribed"==t.row.values.category&&e.jsx("p",{className:"bg-yellow-200 text-yellow-700 border w-fit px-2",children:"UNSUBSCRIBED"}),!t.row.values.category&&e.jsx("p",{className:"bg-red-200 text-red-700 border w-fit px-2",children:"NA"})]})},{Header:"createdAt",accessor:"created_at",Cell:({cell:e})=>d(e.row.values.created_at)},{Header:"Last Modified",accessor:"updated_at",Cell:({cell:e})=>d(e.row.values.updated_at)},{Header:"Action",accessor:"hospitalId",Cell:({cell:t})=>e.jsx("div",{className:"flex gap-x-2",children:e.jsx(f,{to:`/Hospital/${t.row.values.hospitalId}`,"data-tooltip-id":"my-tooltip","data-tooltip-content":"View Details",className:"flex justify-center items-center space-x-1 border px-4 py-2 rounded shadow-sm bg-gray-700 hover:bg-gray-600 text-white font-semibold",children:e.jsx("span",{children:"View"})})})}];return e.jsxs(e.Fragment,{children:[e.jsx(a,{openDeleteModal:n,closeDeleteModal:()=>r(!1),onDeleteConfirm:H,apiEndpoint:m.api_delete_hospital,payload:{contactId:String(y)},title:"Do you want to delete Hospital ?",subtitle:"This hospital will be deleted permanently."}),e.jsx(k,{open:x,position:"right center",onClose:()=>E(!1),children:e.jsxs("span",{children:[" Modal content ",w," "]})}),e.jsx(v,{title:"Hospital List"}),e.jsx("div",{className:"w-full h-fit p-5 bg-white border rounded-md mb-5 overflow-y-auto",children:e.jsx("div",{className:"",children:j?e.jsx(i,{}):N?e.jsx(l,{columns:T,data:N,addBtn:e.jsxs("button",{onClick:()=>D("/AddHospital"),className:"bg-gray-700 rounded py-1 text-sm px-3 text-white hover:shadow-2xl hover:bg-gray-800 text-center relative flex gap-2 whitespace-nowrap",children:["Add New Hospital ",e.jsx(h,{className:"mt-0.5",size:15})," "]})}):e.jsx(s,{message:"No Hospital Found !!"})})}),e.jsx(c,{id:"my-tooltip"})]})};export{C as default};
